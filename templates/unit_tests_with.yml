# Copyright (c) 2019 Shotgun Software Inc.
#
# CONFIDENTIAL AND PROPRIETARY
#
# This work is provided "AS IS" and subject to the Shotgun Pipeline Toolkit
# Source Code License included in this distribution package. See LICENSE.
# By accessing, using, copying or modifying this work you indicate your
# agreement to the Shotgun Pipeline Toolkit Source Code License. All rights
# not expressly granted therein are reserved by Shotgun Software Inc.

parameters:
  qt_libs: PySide2
  python_version: 3.7

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: $(python_version)
  displayName: Use Python $(python_version)
- script: pip install $QT_LIBS
  env:
    QT_LIBS: $(qt_libs)
- script: pip install git+https://github.com/shotgunsoftware/tk-toolchain.git@remote_pip_install#egg=tk-toolchain pytest-azurepipelines
- script: git clone https://github.com/shotgunsoftware/tk-core --depth 1 --branch SG-13264-python-3-compat ../tk-core
  displayName: Installing Python modules
- script: python -m pytest tests
  displayName: Running tests
