# Copyright (c) 2019 Shotgun Software Inc.
#
# CONFIDENTIAL AND PROPRIETARY
#
# This work is provided "AS IS" and subject to the Shotgun Pipeline Toolkit
# Source Code License included in this distribution package. See LICENSE.
# By accessing, using, copying or modifying this work you indicate your
# agreement to the Shotgun Pipeline Toolkit Source Code License. All rights
# not expressly granted therein are reserved by Shotgun Software Inc.

parameters:
  # List of Python packages that need to be pip installed for testing.
  extra_test_dependencies: []
  # Version of tk-toolchain to use.
  tk_toolchain_ref: master
  # List of repositories to clone alongside this repository.
  # To clone the tk-framework-shotgunutils's master branch
  # and a specific tk-framework-qtwidget ref, you would
  # set this parameter to the following:
  # - name: tk-framework-shotgunutils
  # - name: tk-framework-qtwidgets
  #   ref: <branch-or-tag>
  additional_repositories: []
  # Git ref of tk-core to use.
  # TODO: Revert this to master when the Python 3 work for tk-core
  # is merged to master.
  tk_core_ref: SG-13264-python-3-compat
  # Allows to skip test execution.
  skip_tests: false

# This build pipeline will validate the code style and our test suite on
# multiple platforms.
jobs:
- template: "internal/code-style-validation.yml"
  parameters:
    tk_toolchain_ref: ${{ parameters.tk_toolchain_ref }}
    tk_core_ref: ${{ parameters.tk_core_ref }}

- ${{ if ne( parameters.skip_tests, true ) }}:
  - template: "internal/unit-tests.yml"
    parameters:
      # pass through all parameters
      ${{ insert }}: ${{ parameters }}
